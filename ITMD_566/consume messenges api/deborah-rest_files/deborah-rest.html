<!-- saved from url=(0112)https://blackboard.iit.edu/bbcswebdav/pid-753713-dt-content-rid-13930984_1/courses/X9200065.201920/Footable.html -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
    <title>Consuming messenger REST service</title>
    <!-- Bootstrap core CSS -->
    <link href="./bootstrap.min.css" rel="stylesheet" />
    <link href="./bootstrap-theme.min.css" rel="stylesheet" />
  </head>
  <body>
    <h1>
      In this example, I would like to display the output from the messenger
      REST service.
    </h1>
    <div>
      <table class="table" data-paging="true"></table>
    </div>

    <script src="./jquery.min.js.download"></script>
    <script src="./bootstrap.min.js.download"></script>
    <!-- Add in any FooTable dependencies we may need -->
    <script src="./moment.min.js.download"></script>
    <!-- Add in FooTable itself -->
    <script src="./js/footable.min.js"></script>
    <script src="./js/footable.js"></script>

    <script>
      jQuery(function($) {
        const transformLinksArray = linksArray => {
          let newLinksArray = [];

          for (link of linksArray) {
            let { rel, url } = link;
            let newLinkFormat = `${rel}: ${url}`;
            newLinksArray.push(newLinkFormat);
          }
          return newLinksArray;
        };

        let rows;
        $.get("http://localhost:8090/Deborah/webapi/messages/", data => {
          console.log(data);

          data.map(message => {
            let { links } = message;
            links = transformLinksArray(links);
            message.links = links.join(", ");
            message.created = new Date(message.created);
          });

          rows = data;

          $(".table").footable({
            columns: $.get("column.json"),
            rows: rows
          });
        });
      });
    </script>
  </body>
</html>
